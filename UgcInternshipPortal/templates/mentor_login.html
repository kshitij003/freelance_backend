{% extends "base.html" %}

{% block title %}Mentor Login - UGC Portal{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-5">
        <div class="card shadow">
            <div class="card-body">
                <h3 class="card-title text-center mb-4">Mentor Login</h3>
                
                <div class="alert alert-info">
                    <strong>Demo Credentials:</strong><br>
                    Username: <code>mentor</code><br>
                    Password: <code>mentorpass</code>
                </div>

                <form id="loginForm">
                    <div class="mb-3">
                        <label for="username" class="form-label">Username</label>
                        <input type="text" class="form-control" id="username" required>
                    </div>

                    <div class="mb-3">
                        <label for="password" class="form-label">Password</label>
                        <input type="password" class="form-control" id="password" required>
                    </div>

                    <button type="submit" class="btn btn-primary w-100">Login</button>
                </form>

                <div id="errorSection" class="alert alert-danger mt-3" style="display:none;"></div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
document.getElementById('loginForm').addEventListener('submit', async (e) => {
    e.preventDefault();
    
    const username = document.getElementById('username').value;
    const password = document.getElementById('password').value;
    const errorSection = document.getElementById('errorSection');
    
    try {
        const response = await fetch('https://freelance-backend-y0el.onrender.com/api/mentor/login', {
            method: 'POST',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify({username, password})
        });
        
        const data = await response.json();
        
        if (data.success) {
            window.location.href = data.redirect_url;
        } else {
            errorSection.style.display = 'block';
            errorSection.textContent = data.error || 'Invalid credentials';
        }
    } catch (error) {
        errorSection.style.display = 'block';
        errorSection.textContent = 'Login failed: ' + error.message;
    }
});
</script>
{% endblock %}
